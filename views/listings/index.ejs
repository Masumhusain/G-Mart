<% layout("layouts/boilerplate") %>
<style>
  .vedio-container {
    height: 40vh;
    width: 90%;
    border-radius: 6px;
  }
  .vedio-container video {
    height: 100%;
    width: 100%;
    object-fit: cover;
    display: block;
  }

  .products-container {
    background-color: rgb(210, 216, 214);
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    padding: 20px;
    align-items: center;
    justify-content: center;
  }

  @media(max-width: 764px) {
     .vedio-container {
      width: 290px;
     }

     .products-container {
         display: flex;
        justify-content: center;
        align-items: center;
     }

     .navbar-collapse {
        background-color: white;
        padding: 1rem;;
        border-radius: 10px;
        box-shadow: 0, 2px 10px rgba(0 , 0, 0, 0.1);
        z-index: 1000;
     }
  }

</style>
<body>
<div class="products-container">
  <div class="vedio-container">
   <video  id="adVideo" autoplay muted controls class="vedio-container"></video>
</div>
  <% for (let item of listings) { %>
      <div class="product-card">
        <a href="/products/<%= item._id %>">
      <img src="<%= item.image %>" alt="<%= item.name %>" />
      <h3><%= item.name %></h3> 
      <p>Price: ‚Çπ<%= item.price %></p>
       </a>
     
     
    </div>
  <% } %>
   
    
  <br>
   <!-- <form action="/products/new">
    <button type="submit" class="btn btn-dark" style="margin-top: 280px;">Add new Product</button>
  </form>  -->
 
</div>
<script>
  const videoPlayer = document.getElementById('adVideo');
  const videos = [
    '/videos/vedio1.mp4',
    '/videos/vedio2.mp4',
    '/videos/vedio3.mp4',
    '/videos/vedio4.mp4'
  ];

  let currentIndex = 0;

  function playNextVideo() {
    videoPlayer.style.opacity = 0;

    setTimeout(() => {
      currentIndex = (currentIndex + 1) % videos.length;
      videoPlayer.src = videos[currentIndex];
      videoPlayer.load();
      videoPlayer.play();
      videoPlayer.style.opacity = 1;
    }, 1000); // 1s fade transition
  }

  // Initial video load
  videoPlayer.src = videos[currentIndex];
  videoPlayer.play();

  videoPlayer.addEventListener('ended', playNextVideo);
</script>
<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();

  function showToast(message) {
    const toast = document.createElement('div');
    toast.className = 'toast-notify';
    toast.textContent = message;
    document.body.appendChild(toast);

    setTimeout(() => {
      toast.remove();
    }, 3000);
  }

  socket.on("new-product", (product) => {
    showToast("üÜï New product added: " + product.title);
  });

  socket.on("deleted-product", (id) => {
    showToast("‚ùå Product deleted (ID): " + id);
¬†¬†});
</script>

</body> 

